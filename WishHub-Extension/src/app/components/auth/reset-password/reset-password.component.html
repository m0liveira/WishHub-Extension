<section>
  <div #card id="message-card" class="message-card hide">
    <p class="message"
      [ngClass]="{'validMessage': messageType === 'success', 'warningMessage': messageType === 'warning'}"><span
        *ngIf="messageType === 'error'">Error {{messageIndex + 1}} of {{messages.length}}:</span>
      {{messages[messageIndex]}}</p>
    <div #timeBar id="time-bar" class="time-bar"
      [ngClass]="{'valid': messageType === 'success', 'warning': messageType === 'warning'}"></div>
  </div>

  <form class="card" *ngIf="!isMailSent" ngNativeValidate [formGroup]="form" (ngSubmit)="recoverPassword(card, timeBar)">
    <p>WishHub</p>

    <p>Recover your password</p>

    <p>Provide the email address associated with your account to receive a password reset link via email.</p>

    <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="512.000000pt" height="512.000000pt"
      viewBox="0 0 512.000000 512.000000" preserveAspectRatio="xMidYMid meet">
      <g [ngClass]="{'focused': isMailFocused || isMailwritten}"
        transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
        <path
          d="M723 4196 c-188 -46 -344 -201 -388 -387 -22 -96 -22 -2402 0 -2498 46 -193 215 -355 409 -390 41 -8 607 -11 1820 -11 1491 0 1771 3 1829 15 187 39 347 198 392 386 22 96 22 2402 0 2498 -44 186 -200 342 -386 386 -56 13 -290 15 -1844 14 -1400 -1 -1791 -3 -1832 -13z m3302 -405 c-42 -39 -1222 -989 -1260 -1014 -99 -64 -259 -75 -365 -24 -34 16 -288 214 -675 527 -341 276 -627 508 -635 516 -12 12 182 14 1470 14 1450 0 1484 0 1465 -19z m-2509 -856 c628 -508 671 -539 824 -587 64 -20 96 -23 220 -23 124 0 156 3 220 23 155 49 192 75 923 667 l697 564 -2 -1099 -3 -1100 -33 -32 -32 -33 -1770 0 -1770 0 -32 33 -33 32 -3 1101 -2 1100 98 -80 c55 -44 368 -299 698 -566z" />
      </g>
    </svg>

    <input formControlName="email" type="email" name="email" placeholder="Email"
      (focus)="isMailFocused = !isMailFocused" (focusout)="isMailFocused = !isMailFocused" (input)="onInput()">

    <button type="submit">Email me a recover link</button>
  </form>

  <div class="card" *ngIf="isMailSent">
    <p>WishHub</p>

    <p>Recover your password</p>

    <p>Email sent to {{form.value.email}}.<br>Please check your inbox or spam to reset your password.</p>

    <p>Didn't receive an email? <span (click)="recoverPassword(card, timeBar)">Resend email</span></p>

    <a [routerLink]="'/Login'">Login</a>
  </div>
</section>
